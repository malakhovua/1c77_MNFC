Процедура ПриначалеВыбораЗначения(Идент, Флаг)
	Если Идент = "Путь" Тогда
	    Пт = СокрЛП(Путь);
		Фл = "";
		Если ФС.ВыбратьФайл(0, Фл, Пт, "Выберите файл") = 1 Тогда
		    Путь = СокрЛП(Пт) + Фл;
		Иначе
			Возврат;
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры

Функция УстДоступность()
	Попытка
		сКартинка.Загрузить(СокрЛП(Путь));
	Исключение	КонецПопытки;		
КонецФункции // УстДоступность

//====================================================================== //--- УМК Сандомирский В.Ю. (08.10.14)
Процедура ЗаполнитьСписокМатериаловУпаковки()
	Перем НормаМатериаловУпаковки;
	Перем Индекс;
	
	Если Выбран()=0 Тогда
	    Возврат;
	КонецЕсли;

	глЗаполнитьСписокМатериаловУпаковки(СписокМатериаловУпаковки, ТекущийЭлемент(), "Форм", РабочаяДата(),,,,,фОтобразитьНективные);
КонецПроцедуры	// ЗаполнитьСписокМатериаловУпаковки

//====================================================================== //--- УМК Сандомирский В.Ю. (08.10.14)
Процедура ДобавитьМатериалУпаковки()
	Перем ФормаЗаписи;
	Если Выбран() = 0 Тогда
		Предупреждение("Элемент сначала следует записать!");
		Возврат;
	КонецЕсли;	
	ОткрытьФормуМодально("Элемент.УМК_НормыСписанияМатериаловУпаковокФорм",Контекст,,,ТекущийЭлемент());
	ЗаполнитьСписокМатериаловУпаковки();
КонецПроцедуры // Добавить

//====================================================================== //--- УМК Сандомирский В.Ю. (08.10.14)
Процедура ИзменитьМатериалУпаковки()
	Перем ФормаЗаписи;
	Поз = СписокМатериаловУпаковки.ТекущаяСтрока();	
	Если Поз = 0 Тогда
	    // не выбрана строка таблицы
		Возврат;
	КонецЕсли;               	
	Эл = СписокМатериаловУпаковки.ПолучитьЗначение(Поз,"Ссылка");
	ОткрытьФормуМодально(Эл,Контекст);
	ЗаполнитьСписокМатериаловУпаковки();
КонецПроцедуры // Изменить

//====================================================================== //--- УМК Сандомирский В.Ю. (08.10.14)
Процедура УдалитьМатериалУпаковки()
	Предупреждение("Элементы не удаляются - установите нулевую норму на определенный день");	
КонецПроцедуры // Удалить

//
//
Процедура СделатьНеактивным()
	
	Перем Поз;
	
	Поз=СписокМатериаловУпаковки.ТекущаяСтрока();
	
	Если Поз = 0 Тогда
	    // не выбрана строка таблицы
		Возврат;
	КонецЕсли;
	
	Эл=СписокМатериаловУпаковки.ПолучитьЗначение(Поз,"Ссылка");

	Период = ТекущаяДата();
	
	Если ВвестиДату(Период, "Введите с которой материал станет неактивным")=0 Тогда
		Возврат;
	КонецЕсли;
	Спр=СоздатьОбъект("Справочник.УМК_НормыСписанияМатериаловУпаковокФорм");
	Спр.ИспользоватьВладельца(ТекущийЭлемент());
	
	Если Спр.НайтиЭлемент(Эл)=1 Тогда
		Спр.Неактивен.Установить(Период, 1);
		Спр.Записать();
		ЗаполнитьСписокМатериаловУпаковки();
	КонецЕсли;
	
КонецПроцедуры

//======================================================================
Процедура ПриОткрытии()	
	ЗаполнитьСписокМатериаловУпаковки();
КонецПроцедуры // ПриОткрытии

//====================================================================== //--- УМК Сандомирский В.Ю. (12.09.14)
глПолучитьТаблицуМатериаловДляФормы(СписокМатериаловУпаковки, "Форм", 0);
