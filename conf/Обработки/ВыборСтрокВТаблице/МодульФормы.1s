// ===============================
Процедура КликНаТаблице()
	тбВыбор.Пометка = 3 - тбВыбор.Пометка;
КонецПроцедуры //
							  
// ===============================
Процедура Сформировать()
	// результат выбора вернем через расшифровку
	тбВыбор.ВыбратьСтроки();
	Пока тбВыбор.ПолучитьСтроку()=1 Цикл
		Если тбВыбор.Пометка = 2 Тогда
			глРасшифровка.ДобавитьЗначение(тбВыбор.НомерСтроки);
		КонецЕсли;
	КонецЦикла;
	Форма.Закрыть();
КонецПроцедуры

// ===============================
Процедура Выбрать(Режим)
	тбВыбор.ВыбратьСтроки();
	Пока тбВыбор.ПолучитьСтроку()=1 Цикл
		Если Режим = 1 Тогда
			// выбрать все 
			тбВыбор.Пометка = 2;
		ИначеЕсли Режим = 2 Тогда
			// выбрать ни одного
			тбВыбор.Пометка = 1;
		ИначеЕсли Режим = 3 Тогда
			// Инвертировать
			тбВыбор.Пометка = 3 - тбВыбор.Пометка;
		КонецЕсли;
	КонецЦикла;
КонецПроцедуры //

// ===============================
Процедура ПриОткрытии()
	Форма.ПанельИнструментов(0);
	Данные = Форма.Параметр;
	Если ПустоеЗначение(Данные)=1 Тогда
		Предупреждение("Данная обработка вызывается только из обработки ""Формирование налоговых документов""!");
		СтатусВозврата(0);
		Возврат;
	КонецЕсли;
	
	тбДанные = Данные.Получить("Таблица");
	Если ТипЗначенияСтр(тбДанные)<>"ТаблицаЗначений" Тогда
		Предупреждение("Не получена таблица для выбора!");
		СтатусВозврата(0);
		Возврат;
	КонецЕсли;
	Заголовок = Данные.Получить("Заголовок");
	Форма.Заголовок.Заголовок(Заголовок);
	Форма.Заголовок(Заголовок);
	тбДанные.Выгрузить(тбВыбор);
	тбВыбор.ВставитьКолонку("Пометка",1,"Число",1,0,,4);
	тбВыбор.ВидимостьКолонки("НС",0);
	тбВыбор.Фиксировать(0,1);
	тбВыбор.ВыбратьСтроки();
	Пока тбВыбор.ПолучитьСтроку()=1 Цикл
		тбВыбор.Пометка = 2;
	КонецЦикла;

	тбВыбор.ВыводитьПиктограммы("Пометка");
	глРасшифровка = СоздатьОбъект("СписокЗначений");
КонецПроцедуры //ПриОткрытии
